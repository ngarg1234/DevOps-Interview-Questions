Below is a **clean, practical guide** to **Ansible ad-hoc commands** and **executing playbooks**,
, with real examples you can use immediately.

---

# Ansible Ad-hoc Commands & Playbooks

---

## 1Ô∏è‚É£ What is an Ansible ad-hoc command?

**Ad-hoc commands** are:

* One-line Ansible commands
* Used for **quick tasks**
* No YAML playbook needed

Best for:

* Checking status
* Restarting a service
* Copying a file
* Running shell commands

---

## 2Ô∏è‚É£ Basic ad-hoc command syntax

```bash
ansible <hosts> -m <module> -a "<arguments>"
```

### Example: Ping all hosts

```bash
ansible all -m ping
```

---

## 3Ô∏è‚É£ Common ad-hoc command examples

### üîπ Check uptime

```bash
ansible all -m command -a "uptime"
```

### üîπ Check disk usage

```bash
ansible all -m shell -a "df -h"
```

### üîπ Create a directory

```bash
ansible all -m file -a "path=/opt/app state=directory"
```

### üîπ Copy a file

```bash
ansible all -m copy -a "src=app.conf dest=/etc/app.conf"
```

### üîπ Install package (Linux)

```bash
ansible all -m yum -a "name=nginx state=present"   # RHEL
ansible all -m apt -a "name=nginx state=present"   # Ubuntu
```

### üîπ Restart a service

```bash
ansible all -m service -a "name=nginx state=restarted"
```

---

## 4Ô∏è‚É£ Inventory usage

### Default inventory

```bash
ansible all -m ping
```

### Custom inventory file

```bash
ansible -i inventory.ini all -m ping
```

---

## 5Ô∏è‚É£ Using sudo / root access

```bash
ansible all -m ping --become
```

With user:

```bash
ansible all -m ping --become --become-user=root
```

---

## 6Ô∏è‚É£ Limit hosts

```bash
ansible webservers -m ping
ansible all -m ping --limit server1
```

---

## 7Ô∏è‚É£ Running ad-hoc commands on a single host

```bash
ansible server1 -m shell -a "free -m"
```

---

## 8Ô∏è‚É£ When NOT to use ad-hoc commands

‚ùå Multi-step automation
‚ùå Complex logic
‚ùå Reusable tasks
‚ùå CI/CD pipelines

‚û° Use **playbooks**

---

# ‚ñ∂Ô∏è Executing Ansible Playbooks

---

## 9Ô∏è‚É£ What is an Ansible playbook?

Playbooks:

* Written in **YAML**
* Define **desired state**
* Idempotent
* Version controlled

---

## üîü Basic playbook structure

```yaml
---
- name: Install and start nginx
  hosts: webservers
  become: yes

  tasks:
    - name: Install nginx
      yum:
        name: nginx
        state: present

    - name: Start nginx
      service:
        name: nginx
        state: started
        enabled: yes
```

---

## 1Ô∏è‚É£1Ô∏è‚É£ Run a playbook

```bash
ansible-playbook site.yml
```

With inventory:

```bash
ansible-playbook -i inventory.ini site.yml
```

---

## 1Ô∏è‚É£2Ô∏è‚É£ Dry run (check mode)

```bash
ansible-playbook site.yml --check
```

---

## 1Ô∏è‚É£3Ô∏è‚É£ Show differences

```bash
ansible-playbook site.yml --diff
```

---

## 1Ô∏è‚É£4Ô∏è‚É£ Run on specific hosts

```bash
ansible-playbook site.yml --limit web1
```

---

## 1Ô∏è‚É£5Ô∏è‚É£ Run specific tags

```yaml
tasks:
  - name: Install nginx
    yum:
      name: nginx
    tags: install
```

```bash
ansible-playbook site.yml --tags install
```

---

## 1Ô∏è‚É£6Ô∏è‚É£ Run with extra variables

```bash
ansible-playbook site.yml -e "env=prod"
```

---

## 1Ô∏è‚É£7Ô∏è‚É£ Run as another user (sudo)

```bash
ansible-playbook site.yml --become
```

---

## 1Ô∏è‚É£8Ô∏è‚É£ Run playbook from CI/CD

```bash
ansible-playbook site.yml \
  -i inventory.ini \
  --become \
  --extra-vars "env=prod"
```

---

## 1Ô∏è‚É£9Ô∏è‚É£ Ad-hoc vs Playbook (quick comparison)

| Feature         | Ad-hoc     | Playbook |
| --------------- | ---------- | -------- |
| YAML            | ‚ùå          | ‚úÖ        |
| Multi-step      | ‚ùå          | ‚úÖ        |
| Idempotent      | ‚ö†Ô∏è Limited | ‚úÖ        |
| Version control | ‚ùå          | ‚úÖ        |
| CI/CD           | ‚ùå          | ‚úÖ        |

---

## üèÅ Quick memory rule

> **Ad-hoc = quick one-time command**
> **Playbook = repeatable automation**

---

If you want next, I can:

* Share **top 20 ad-hoc commands**
* Explain **Ansible inventory best practices**
* Show **roles vs playbooks**
* Provide **real production playbook example**

Just tell me üëç
